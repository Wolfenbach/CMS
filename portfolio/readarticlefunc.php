<?php
     //Sets the content of the article

     $dk_article = [
		"title" => "PHP læs fil: read_article",
		"intro" => "Forklaring hvordan denne hjemmeside her henter informationen ud fra filerne på en ftp server, som så vises på de forskellige sider.",
		"photo" => "/images/read_article.png",
		"date" => "Marts 12, 2019",
		"category" => "Portefølge",
		"type" => "PHP",
		"metasearchwords" => "Portefølge PHP indlæsfil",
		"content" => "<h3>Problemstillingen</h3><p>For at genere artiklerne, så de kan vises på index siden samt portefølge og blog siden.</br></br>Skal vi have en måde at vi kan hive information som eksempelvis title, intro tekst, foto, dato og filnavnet ud så de kan bruges på de tidligere nævnt sider.</p><h3>Fremgangsmåden</h3><p>Før vi kan gøre noget skal vi see hvad det er vi har at arbejde med, da vi arbejder med filer, skal man se hvordan de er struktureret.</br></br>Så hvis vi tager en kig på en af filerne som bruges for at vise dens artikel.</p><img src='/images/read_article2.png' style='margin-top: 10px; margin-bottom: 10px;'><p>Som man kan se, så de informationer som vi er interesseret efter er markeret med rød { symboler, den øverste sæt er den danske udgave, og den anden er den engelske udgave, så har vi en sessions variable at arbejde ud fra af som hedder language, som enten har dansk eller engelsk, som vi kan bruge til at differentiere ud fra sprogene.</br></br>Da artiklernes konstruktion er standardiseret, kan man hente nogle bestemt linjer ud fra filen for at kunne få det data man gerne vil have, så løsningen for at kunne hente disse linjer ud, så skal den skippe ned til de linjerne ud fra sessions variablen language.</br></br>Så ud fra at vi kender biblioteket filerne ligger i og filens navn, skal programmet kunne åbne filen, ud fra sessions varablen langauge skippe x antal linjer,  derefter hente indholdet for filnavn, title, intro, photo og date gemmes i et array, som så bliver returneret ud.</br></br>Som så vil løse vores problemstilling.</p><h3>Koden til løsningen</h3><p>Her har vi koden som jeg har lavet ud fra den metode jeg valgte foroven.</p><textarea rows='60' style='width: 100%; border: none; resize: none;' disabled><?php \n\n     /*\n      *    Programmer: Sandy Stiven Mortensen            Created date: February 17, 2019\n      *\n      *    Reads a specific file in a specific directory, & gets the relavant information from the article depending on the language\n     */\n\n     /*Function get_articles has 3 parameters:\n          dirstring is a string that indicates directory where the articles are located, \n          dir is a string that indicates the file name in the directory.\n     */\n\n     function read_article(&dollar;dirstring, &dollar;dir){\n\n          //read the file in the directory dirstring, with the filename dir into variable file\n          &dollar;file = fopen(&dollar;dirstring . '/' . &dollar;dir, 'r');\n\n          //dir declared as an array element of article with the name 'filename'\n          &dollar;article['filename'] = &dollar;dir;\n\n          //If we haven't reached the end of file, then\n          if(!feof(&dollar;file)){\n\n          //skips portions of the file depending on the language else outputs console error msg 'Language String: Unknown language'\n          if($dollar;_SESSION['language'] == 'danish') {\n               for(&dollar;n = 0; &dollar;n < 4; &dollar;n++)\n               fgets(&dollar;file);\n          }\n          else if(&dollar;_SESSION['language'] == 'english') {\n               for(&dollar;n = 0; &dollar;n < 16; &dollar;n++)\n               fgets(&dollar;file);\n          } else {\n               echo " . '"' ."<script>console.log( 'Language String: Unknown language' );</script>" . '"' . ";\n          }\n\n          //each following line dir is declared as a new element of the array article.\n          &dollar;article['title'] = substr(fgets(&dollar;file), 14, -3);\n          &dollar;article['intro'] = substr(fgets(&dollar;file), 14, -3);\n          &dollar;article['photo'] = substr(fgets(&dollar;file), 14, -3);\n          &dollar;article['date'] = substr(fgets(&dollar;file), 13, -3);\n\n          //closes the file\n          fclose(&dollar;file);\n\n          //returns article array\n          return &dollar;article;\n     }\n?></textarea><h3>Kode gennemgang</h3><p>Her vil jeg ligge kommentar ind af folk som der har reviewet min kode, hvis de skulle have lyst til dette, kommentare altid velkommen.</br></br>De vil selvføldig blive krediteret sammen med deres kommentar, med et link til deres kommentar på linkedin.</p><h3>Præsentation</h3><p>Hvis du skulle have lyst til at se denne kode her i aktion, så kan du se dem på index siden <a href='/' target='blank_'>her</a>, på portefølge siden <a href='/portfolio.php' target='blank_'>her</a>, og på blog siden <a href='/blog.php' target='blank_'>her</a>.</br></br>Hver artikel som bliver vist på disse sider, får informationen ud af filerne som forklaret på denne side her.</p>",
		"metadescription" => "Forklaring hvordan denne hjemmeside her henter informationen ud fra filerne på en ftp server, som så vises på de forskellige sider.",
     ];

     $en_article = [
		"title" => "PHP read file: read_article",
		"intro" => "Explaination on how this website gets the information out of the files on a ftp server, which is then shown on the different pages.",
		"photo" => "/images/read_article.png",
		"date" => "March 12, 2019",
		"category" => "Portfolio",
		"type" => "PHP",
		"metasearchwords" => "Portefolio PHP readfile",
		"content" => "<h3>Problem definition</h3><p>To generate the articles, so that they can be shown on the index, portfolio & blog page.</br></br>We the need a method where we can extract the information as example title, intro text, photo, date, & filename out that can used on the previous mentioned pages.</p><h3>Methodology</h3><p>Before we can do anything we must see what we have to work with, when we are working with files, you must then known how they are structured.</br></br>So if we take a loook at one of the files that are being use to show it's article.</p><img src='/images/read_article2.png' style='margin-top: 10px; margin-bottom: 10px;'><p>As you can see, the information that we are interested in, are marked with a red { symbols, the first set is the danish version, & the second set is the english version, we also have a session variable to work with that is called language, that can either be danish or english, that we can use to differentiate between the languages.</br></br>Since the articles construction is standardised, you can then get certain lines from the file to get the data that you want, so the solution for getting these lines, will be to skip down to these lines determined by the session variable langauge.</br></br>We assume to know the library where the files are, & the file's name, the program must then be able to open the file, it will then from the session variablen language skip x lines, & then get the content for filename, intro, photo & date into an array, that will then be returned.</p><h3>The code for the solution</h3><p>Here is the code that i created using the method to my solution explained above.</p><textarea rows='60' style='width: 100%; border: none; resize: none;' disabled><?php \n\n     /*\n      *    Programmer: Sandy Stiven Mortensen            Created date: February 17, 2019\n      *\n      *    Reads a specific file in a specific directory, & gets the relavant information from the article depending on the language\n     */\n\n     /*Function get_articles has 3 parameters:\n          dirstring is a string that indicates directory where the articles are located, \n          dir is a string that indicates the file name in the directory.\n     */\n\n     function read_article(&dollar;dirstring, &dollar;dir){\n\n          //read the file in the directory dirstring, with the filename dir into variable file\n          &dollar;file = fopen(&dollar;dirstring . '/' . &dollar;dir, 'r');\n\n          //dir declared as an array element of article with the name 'filename'\n          &dollar;article['filename'] = &dollar;dir;\n\n          //If we haven't reached the end of file, then\n          if(!feof(&dollar;file)){\n\n          //skips portions of the file depending on the language else outputs console error msg 'Language String: Unknown language'\n          if($dollar;_SESSION['language'] == 'danish') {\n               for(&dollar;n = 0; &dollar;n < 4; &dollar;n++)\n               fgets(&dollar;file);\n          }\n          else if(&dollar;_SESSION['language'] == 'english') {\n               for(&dollar;n = 0; &dollar;n < 16; &dollar;n++)\n               fgets(&dollar;file);\n          } else {\n               echo " . '"' ."<script>console.log( 'Language String: Unknown language' );</script>" . '"' . ";\n          }\n\n          //each following line dir is declared as a new element of the array article.\n          &dollar;article['title'] = substr(fgets(&dollar;file), 14, -3);\n          &dollar;article['intro'] = substr(fgets(&dollar;file), 14, -3);\n          &dollar;article['photo'] = substr(fgets(&dollar;file), 14, -3);\n          &dollar;article['date'] = substr(fgets(&dollar;file), 13, -3);\n\n          //closes the file\n          fclose(&dollar;file);\n\n          //returns article array\n          return &dollar;article;\n     }\n?></textarea><h3>Code Review</h3><p>Here I will place comments from people who has reviewed my code, should they want to, comments are always welcome.</br></br>They will ofcourse be credited along with their comment, with a link to their comment on linkedin.</p><h3>Presentation</h3>If you want to see the code in action, you will be able to see it on the index page <a href='/' target='blank_'>here</a>, on the portfolio page <a href='/portfolio.php' target='blank_'>here</a>, & on the blog page <a href='/blog.php' target='blank_'>here</a>.</br></br>Each article that is shown on those pages, gets the information from the files as explained on this page.",
		"metadescription" => "Explaination on how this website gets the information out of the files on a ftp server, which is then shown on the different pages.",
     ];     

?>
<?php 
     include_once "../articleform.php";
?>